(function(){var e=!0,j=!1;
KolorArea=function(x,r){function I(){a.close_displayed!==j&&d.find(".kolorAreaCloseBtn").unbind("click").bind("click",function(a){ktools.DOM.stopEventPropagation(a);s.b()})}function y(){if(a.overlay_displayed===e){var b=d.find(".kolorAreaOverlay");b.css("opacity",a.overlay_alpha);b.css("background","#"+a.overlay_color);b.css("width",f+"px");b.css("height",k+"px");b.unbind("click").bind("click",function(a){ktools.DOM.stopEventPropagation(a);s.b()})}}function z(a,c){var g=d.find(".kolorArea"),h=ktools.Color.hex2rgb(a);
"Explorer"==kolorBrowserDetect.browser&&9>kolorBrowserDetect.version?g.css("background","rgb("+h[0]+","+h[1]+","+h[2]+")"):g.css("background","rgba("+h[0]+","+h[1]+","+h[2]+","+c+")")}function A(){d.find(".kolorArea").stop();d.find(".kolorArea").css("top",n+"px");d.find(".kolorArea").css("left",o+"px")}function t(){d.find(".kolorArea").stop();d.find(".kolorArea").css("top",u+"px");d.find(".kolorArea").css("left",v+"px")}function B(){var b=d.find(".kolorArea"),c=a.area_width,g=a.area_height;"percent"==
a.area_width_unit&&(c*=f/100);"percent"==a.area_height_unit&&(g*=k/100);b.css("width",c);b.css("height",g);b.find(".kolorAreaContent").css("width",c-2*a.padding+"px");a.close_displayed===e?b.find(".kolorAreaTitle").css("width",c-2*a.padding-32+"px"):a.display_title===e&&b.find(".kolorAreaTitle").css("width",c-2*a.padding+"px");a.display_title===e||a.close_displayed===e?b.find(".kolorAreaContent").css("height",g-2*a.padding-32-5+"px"):b.find(".kolorAreaContent").css("height",g-2*a.padding+"px")}function C(){var b=
0,c=0;switch(a.position){case KolorArea.a.j:b=a.margin_y;c=a.margin_x;break;case KolorArea.a.d:b=a.margin_y;c=(f-i)/2;break;case KolorArea.a.k:b=a.margin_y;c=f-i-a.margin_x;break;case KolorArea.a.i:b=(k-m)/2;c=f-i-a.margin_x;break;case KolorArea.a.h:b=k-m-a.margin_y;c=f-i-a.margin_x;break;case KolorArea.a.f:b=k-m-a.margin_y;c=(f-i)/2;break;case KolorArea.a.g:b=k-m-a.margin_y;c=a.margin_x;break;case KolorArea.a.c:b=(k-m)/2;c=a.margin_x;break;case KolorArea.a.p:b=(k-m)/2,c=(f-i)/2}n=b;o=c}function D(){var b=
0,c=0;switch(a.start_position){case KolorArea.a.j:b=-m;c=-i;break;case KolorArea.a.d:b=-m;c=o;break;case KolorArea.a.k:b=-m;c=f;break;case KolorArea.a.i:b=n;c=f;break;case KolorArea.a.h:b=k;c=f;break;case KolorArea.a.f:b=k;c=o;break;case KolorArea.a.g:b=k;c=-i;break;case KolorArea.a.c:b=n,c=-i}u=b;v=c}function E(){i=d.find(".kolorArea").width()+2*a.area_border_width;m=d.find(".kolorArea").height()+2*a.area_border_width}function F(){f=jQuery("#"+r).width();k=jQuery("#"+r).height()}function J(){F();
B();E();C();D();y();"close"==p?t():"open"==p&&A()}function K(b){ktools.DOM.stopEventPropagation(b);s.b();a.close_onclick_callback&&ktools.Code.eval(a.close_onclick_callback)}var a={position:KolorArea.a.c,start_position:KolorArea.a.d,margin_x:50,margin_y:0,padding:15,background_color:"f2f2f2",background_alpha:0.8,topleft_radius:8,topright_radius:8,bottomleft_radius:8,bottomright_radius:8,area_border_width:0,area_border_color:"f2f2f2",area_border_style:"solid",area_width:20,area_height:100,area_width_unit:"percent",
area_height_unit:"percent",overlay_displayed:j,overlay_color:"000000",overlay_alpha:0.5,animation:e,animation_duration:800,close_on_click:j,close_onclick_callback:j,close_callback:j,open_callback:j,close_displayed:j,display_title:j,title:"",title_color:"000000",title_font:"Verdana, sans-serif",title_size:"14",title_weight:"bold",title_decoration:"normal",use_i18n:j,zorder:0},f=0,k=0,i=0,m=0,u=0,v=0,n=0,o=0,d=null,q=null,G=j,p=void 0,w=j,H=j,s=this;this.setKolorAreaOptions=this.n=function(b){jQuery.extend(a,
b)};this.getKolorAreaOptions=this.r=function(){return a};this.setKolorAreaContent=this.m=function(a){q=a};this.setReady=this.t=function(a){G=a};this.isReady=this.isReady=function(){return G};this.openKolorArea=this.s=function(){var b=w;if(w===j){var c='<div id="'+x+'" class="kolorAreaContainer" style="z-index:'+a.zorder+';">',c=c+'<div class="kolorArea">';if(a.close_displayed===e||a.display_title===e)c+='<div class="kolorAreaHeader"><div class="kolorAreaTitle">',""!=a.title&&(c+=ktools.I18N.getInstance().getMessage(a.title)),
c+="</div>";a.close_displayed===e&&(c+='<a class="kolorAreaCloseBtn" title="Close" />');if(a.close_displayed===e||a.display_title===e)c+="</div>";c+='<div class="kolorAreaContent loading"></div></div>';a.overlay_displayed===e&&(c+='<div class="kolorAreaOverlay"></div>');jQuery("#"+r).prepend(c+"</div>");d=jQuery("#"+x);z(a.background_color,a.background_alpha);var c=a.topleft_radius,g=a.topright_radius,h=a.bottomright_radius,f=a.bottomleft_radius,k=a.area_border_width,i=a.area_border_color,m=a.area_border_style,
l=d.find(".kolorArea");l.css("-moz-border-radius-topleft",c+"px");l.css("border-top-left-radius",c+"px");l.css("-webkit-border-top-left-radius",c+"px");l.css("-moz-border-radius-topright",g+"px");l.css("border-top-right-radius",g+"px");l.css("-webkit-border-top-right-radius",g+"px");l.css("-moz-border-radius-bottomright",h+"px");l.css("border-bottom-right-radius",h+"px");l.css("-webkit-border-bottom-right-radius",h+"px");l.css("-moz-border-radius-bottomleft",f+"px");l.css("border-bottom-left-radius",
f+"px");l.css("-webkit-border-bottom-left-radius",f+"px");l.css("border-width",k+"px");l.css("border-color","#"+i);l.css("border-style",m);c=a.padding;g=d.find(".kolorAreaContent");a.display_title===e||a.close_displayed===e?(h=d.find(".kolorAreaHeader"),h.css("margin",c+"px 0 5px "+c+"px"),h.css("padding-right",c+"px"),h=d.find(".kolorAreaCloseBtn"),h.css("top",c+"px"),h.css("right",c+"px"),g.css("margin","0 0 "+c+"px "+c+"px")):g.css("margin",c+"px 0 "+c+"px "+c+"px");g.css("padding-right",c+"px");
c=a.title_color;g=a.title_font;h=a.title_weight;f=a.title_size;k=a.title_decoration;a.display_title===e&&(i=d.find(".kolorArea .kolorAreaTitle"),i.css("color","#"+c),i.css("font-family",g),i.css("font-weight",h),i.css("font-size",f+"px"),i.css("text-decoration",k));a.close_on_click&&d.find(".kolorArea").bind("click",K);H===j&&(jQuery(window).bind("resize",J),H=e);F();B();E();C();D();t();y();I();w=e}(a.refresh_content||b===j)&&this.e();p="open";this.o([a.animation]);a.animation||A();(a.refresh_content||
b===j)&&a.open_callback&&ktools.Code.eval(a.open_callback)};this.closeKolorArea=this.b=function(){"open"==p&&(p="close",this.l([a.animation]),a.animation||t(),a.close_callback&&ktools.Code.eval(a.close_callback))};this.showKolorArea=this.o=function(b){d.show();if(b&&Boolean(b[0]===e||"true"===b[0]||1===parseInt(b[0])||"yes"===b[0]||"on"===b[0])===e)d.find(".kolorArea").stop(),d.find(".kolorArea").animate({top:n,left:o},a.animation_duration,function(){})};this.hideKolorArea=this.l=function(b){b&&Boolean(b[0]===
e||"true"===b[0]||1===parseInt(b[0])||"yes"===b[0]||"on"===b[0])===e?(d.find(".kolorArea").stop(),d.find(".kolorArea").animate({top:u,left:v},a.animation_duration,function(){d.hide()})):d.hide()};this.updateKolorArea=this.v=function(a){null!=a&&"undefined"!=typeof a&&null!=a[0]&&this.m(a[0]);this.e()};this.updateContent=this.e=function(){if("null"!=q){jQuery(d).find(".kolorAreaContent").addClass("loading");var b="",b=a.use_i18n?ktools.I18N.getInstance().getMessage(q):ktools.String.decode(q);d.find(".kolorAreaContent").html(b);
jQuery(d).find(".kolorAreaContent").removeClass("loading")}};this.updateBackgroundColor=this.u=function(b){"undefined"!=typeof b[0]&&(a.background_color=b[0]);"undefined"!=typeof b[1]&&(a.background_alpha=b[1]);z(a.background_color,a.background_alpha)};this.changeTitle=this.q=function(b){""!=a.title||"undefined"!=typeof b[0]&&""!=b[0]?(this.n({title:b[0]}),d.find(".kolorAreaTitle").html(ktools.I18N.getInstance().getMessage(a.title)),d.find(".kolorAreaTitle").css("margin-left","2px")):d.find(".kolorAreaTitle").html("")}};
KolorArea.w={A:"vertical",z:"horizontal"};KolorArea.a={j:"topleft",d:"top",k:"topright",i:"right",h:"bottomright",f:"bottom",g:"bottomleft",c:"left",p:"center"};})();